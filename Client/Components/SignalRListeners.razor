@using Microsoft.AspNetCore.SignalR.Client
@inject HubConnection HubConnection
@inject GameStateContainer GameStateContainer

@code {
    protected override async Task OnInitializedAsync()
    {
        HubConnection.On<NewPlayerEvent>(nameof(IGameClient.NewPlayer), (NewPlayerEvent newPlayerEvent) => GameStateContainer.AddPlayer(newPlayerEvent.NewPlayer));

        HubConnection.On<NewRoundEvent>(nameof(IGameClient.NewRound), (NewRoundEvent newRoundEvent) => GameStateContainer.NewRound(
            newRoundEvent.RoundNumber,
            newRoundEvent.CardCzar,
            newRoundEvent.QuestionCard,
            newRoundEvent.DealtCards
            ));

        await HubConnection.StartAsync();
    }
}
