@page "/"
@inject BlazorComponentBus.ComponentBus Bus

<SignalRListeners />
<GameBoard />

@if (NewGame)
{
    <StartupModal />
}


@code {
    bool NewGame = true;

    protected override async Task OnInitializedAsync()
    {

        Bus.Subscribe<GameJoinedEvent>((args) => OnGameJoined(args.GetMessage<GameJoinedEvent>()));
    }

    private void OnGameJoined(GameJoinedEvent gameJoinedEvent)
    {
        NewGame = false;
        StateHasChanged();
    }
}
